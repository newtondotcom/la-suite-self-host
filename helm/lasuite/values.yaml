# LaSuite Umbrella Chart Values
# This chart orchestrates the deployment of all LaSuite components

# Global configuration shared across all components
global:
  domain: lasuite.example.com
  storageClass: standard
  imagePullSecrets: []

# Keycloak - Authentication & Authorization
keycloak:
  enabled: true
  auth:
    adminUser: admin
    adminPassword: changeme
  service:
    type: ClusterIP
  ingress:
    enabled: true
    className: nginx
    hostname: keycloak.lasuite.example.com
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    tls: true
    certSecret: keycloak-tls
  postgresql:
    enabled: true
    auth:
      username: keycloak
      password: changeme
      postgresPassword: changeme
    primary:
      persistence:
        enabled: true
        size: 5Gi

# Docs (Impress) Component
docs:
  enabled: true
  replicaCount: 1
  image:
    repository: nexus.suitenumerique.com/docker-prod/impress
    tag: latest
    pullPolicy: IfNotPresent
  ingress:
    hostname: docs.lasuite.example.com

# Drive Component
drive:
  enabled: true
  replicaCount: 1
  image:
    repository: nexus.suitenumerique.com/docker-prod/drive
    tag: latest
    pullPolicy: IfNotPresent
  ingress:
    hostname: drive.lasuite.example.com

# Meet Component
meet:
  enabled: true
  replicaCount: 1
  image:
    repository: nexus.suitenumerique.com/docker-prod/meet
    tag: latest
    pullPolicy: IfNotPresent
  ingress:
    hostname: meet.lasuite.example.com

# People (Desk) Component
people:
  enabled: true
  replicaCount: 1
  image:
    repository: nexus.suitenumerique.com/docker-prod/desk
    tag: latest
    pullPolicy: IfNotPresent
  ingress:
    hostname: people.lasuite.example.com

# Common infrastructure (if not using individual PostgreSQL)
postgresql:
  enabled: false  # Set to true only if you want a shared PostgreSQL outside component-specific ones
  auth:
    username: lasuite
    password: changeme
    postgresPassword: changeme
  primary:
    persistence:
      size: 10Gi

redis:
  enabled: false  # Set to true if needed for caching/sessions across components
  auth:
    enabled: false
  master:
    persistence:
      size: 2Gi

# Ingress configuration (handled per component)
ingress:
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
  tls:
    enabled: true
    issuer: letsencrypt-prod
